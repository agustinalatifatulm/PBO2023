-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.anggota
(
    username character varying(25) COLLATE pg_catalog."default",
    password character varying(25) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT anggota_pkey PRIMARY KEY (password)
);

CREATE TABLE IF NOT EXISTS public.buku
(
    idbuku character varying COLLATE pg_catalog."default" NOT NULL,
    isbn character varying(255) COLLATE pg_catalog."default",
    judul character varying(255) COLLATE pg_catalog."default",
    kategori character varying(255) COLLATE pg_catalog."default",
    pengarang character varying(255) COLLATE pg_catalog."default",
    penerbit character varying(255) COLLATE pg_catalog."default",
    tahun character varying COLLATE pg_catalog."default",
    jumlahhalaman character varying COLLATE pg_catalog."default",
    CONSTRAINT buku_pkey PRIMARY KEY (idbuku)
);

CREATE TABLE IF NOT EXISTS public.peminjaman
(
    idpeminjaman character varying COLLATE pg_catalog."default" NOT NULL,
    nama character varying COLLATE pg_catalog."default",
    nim character varying COLLATE pg_catalog."default",
    prodi character varying COLLATE pg_catalog."default",
    tanggalpinjam date,
    tanggalkembali date,
    angkatan character varying COLLATE pg_catalog."default",
    idbuku character varying COLLATE pg_catalog."default",
    judulbuku character varying COLLATE pg_catalog."default",
    CONSTRAINT peminjaman_pkey PRIMARY KEY (idpeminjaman)
);

CREATE TABLE IF NOT EXISTS public.peminjamanskripsi
(
    idpeminjaman character varying(10) COLLATE pg_catalog."default" NOT NULL,
    nama character varying(100) COLLATE pg_catalog."default",
    nim character varying(15) COLLATE pg_catalog."default",
    prodi character varying(100) COLLATE pg_catalog."default",
    angkatan character varying(4) COLLATE pg_catalog."default",
    tanggalpinjam date,
    tanggalkembali date,
    idskripsi character varying COLLATE pg_catalog."default",
    judulskripsi character varying COLLATE pg_catalog."default",
    CONSTRAINT peminjamanskripsi_pkey PRIMARY KEY (idpeminjaman)
);

CREATE TABLE IF NOT EXISTS public.skripsi
(
    idskripsi character varying COLLATE pg_catalog."default" NOT NULL,
    judul character varying COLLATE pg_catalog."default",
    pengarang character varying COLLATE pg_catalog."default",
    tahun character varying COLLATE pg_catalog."default",
    halaman character varying COLLATE pg_catalog."default",
    CONSTRAINT "Skripsi_pkey" PRIMARY KEY (idskripsi)
);

ALTER TABLE IF EXISTS public.peminjaman
    ADD CONSTRAINT fk_peminjaman_idbuku FOREIGN KEY (idbuku)
    REFERENCES public.buku (idbuku) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.peminjamanskripsi
    ADD CONSTRAINT fk_peminjamanskripsi FOREIGN KEY (idskripsi)
    REFERENCES public.skripsi (idskripsi) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;